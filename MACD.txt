DIF:EMA(CLOSE,12)-EMA(CLOSE,26),COLORRED;
DEA:EMA(DIF,9),COLORWHITE;
MACD:(DIF-DEA)*2,COLORSTICK;
DRAWICON(CROSS(DIF,DEA),DIF,1);
DRAWICON(CROSS(DEA,DIF),DEA,2);

DIF1:= REF(DIF,1);
DEA1:= REF(DEA,1);

JIN:=(DIF1*(DEA-DEA1)-DEA1*(DIF-DIF1))/(DEA-DEA1-DIF+DIF1);
SI:=(DEA1*(DIF-DIF1)-DIF1*(DEA-DEA1))/(DIF-DIF1-DEA+DEA1);

DRAWTEXT(CROSS(DIF,DEA),DIF,VARCAT('LONG@',VAR2STR(JIN,3))),COLORRED;
DRAWTEXT(CROSS(DEA,DIF),DEA,VARCAT('SHORT@',VAR2STR(JIN,3))),COLORGREEN;