N:=9;M:=3;MM:=5;
RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;
FASTK:=SMA(RSV,M,1);
K:SMA(FASTK,M,1),LINETHICK1,COLORMAGENTA;
D:SMA(K,MM,1),LINETHICK1,COLORYELLOW;
DRAWICON(CROSS(K,D),K,1);
DRAWICON(CROSS(D,K),D,2);


K1:= REF(K,1);
D1:= REF(D,1);

JIN:=(K1*(D-D1)-D1*(K-K1))/(D-D1-K+K1);
SI:=(D1*(K-K1)-K1*(D-D1))/(K-K1-D+D1);

DRAWTEXT(CROSS(K,D),K,VARCAT('LONG@',VAR2STR(JIN,3))),COLORRED;
DRAWTEXT(CROSS(D,K),D,VARCAT('SHORT@',VAR2STR(SI,3))),COLORGREEN;
